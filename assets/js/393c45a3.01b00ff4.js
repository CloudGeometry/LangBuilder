"use strict";(self.webpackChunklangbuilder_docs=self.webpackChunklangbuilder_docs||[]).push([[692],{10734:(e,n,t)=>{t.r(n),t.d(n,{CH:()=>p,assets:()=>h,chCodeConfig:()=>g,contentTitle:()=>u,default:()=>x,frontMatter:()=>d,metadata:()=>r,toc:()=>b});const r=JSON.parse('{"id":"Configuration/api-keys-and-authentication","title":"API keys and authentication","description":"Never expose Langbuilder ports directly to the internet without proper security measures.","source":"@site/docs/Configuration/api-keys-and-authentication.mdx","sourceDirName":"Configuration","slug":"/api-keys-and-authentication","permalink":"/api-keys-and-authentication","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"API keys and authentication","slug":"/api-keys-and-authentication"},"sidebar":"docs","previous":{"title":"Connect an Astra DB MCP server to Langbuilder","permalink":"/mcp-component-astra"},"next":{"title":"Install custom dependencies","permalink":"/install-custom-dependencies"}}');var s=t(74848),i=t(28453),a=t(24754),o=t(11470),l=t(19365),c=t(17886);const d={title:"API keys and authentication",slug:"/api-keys-and-authentication"},u=void 0,h={},p={annotations:a.hk,Code:a.Cy},g={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},b=[{value:"Langbuilder API keys",id:"langbuilder-api-keys",level:2},{value:"Langbuilder API key permissions",id:"langbuilder-api-key-permissions",level:3},{value:"Create a Langbuilder API key",id:"create-a-langbuilder-api-key",level:3},{value:"Use a Langbuilder API key",id:"use-a-langbuilder-api-key",level:3},{value:"Revoke an API key",id:"revoke-an-api-key",level:3},{value:"Component API keys",id:"component-api-keys",level:2},{value:"Authentication environment variables",id:"authentication-environment-variables",level:2},{value:"LANGBUILDER_AUTO_LOGIN",id:"langbuilder-auto-login",level:3},{value:"AUTO_LOGIN and API authentication in version 1.5 and later",id:"auto_login-and-api-authentication-in-version-15-and-later",level:4},{value:"LANGBUILDER_ENABLE_SUPERUSER_CLI",id:"langbuilder-enable-superuser-cli",level:3},{value:"LANGBUILDER_SUPERUSER and LANGBUILDER_SUPERUSER_PASSWORD",id:"langbuilder-superuser",level:3},{value:"LANGBUILDER_SECRET_KEY",id:"langbuilder-secret-key",level:3},{value:"LANGBUILDER_NEW_USER_IS_ACTIVE",id:"langbuilder-new-user-is-active",level:3},{value:"Start a Langbuilder server with authentication enabled",id:"start-a-langbuilder-server-with-authentication-enabled",level:2},{value:"Start the Langbuilder server",id:"start-the-langbuilder-server",level:3},{value:"Manage users as an administrator",id:"manage-users-as-an-administrator",level:3}];function y(e){const n={a:"a",admonition:"admonition",code:"code",em:"em",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components},{Details:t}=n;return p||f("CH",!1),p.Code||f("CH.Code",!0),t||f("Details",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n","\n",(0,s.jsx)(n.admonition,{type:"warning",children:(0,s.jsxs)(n.p,{children:["Never expose Langbuilder ports directly to the internet without proper security measures.\nSet ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=False"}),", use a non-default ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SECRET_KEY"}),", and deploy your Langbuilder server behind a reverse proxy with authentication enabled.\nFor more information, see ",(0,s.jsx)(n.a,{href:"#start-a-langbuilder-server-with-authentication-enabled",children:"Start a Langbuilder server with authentication enabled"}),"."]})}),"\n",(0,s.jsx)(n.p,{children:"Authentication credentials help prevent unauthorized access to your Langbuilder server, flows, and services connected through components."}),"\n",(0,s.jsx)(n.p,{children:"There are three types of credentials that you use in Langbuilder:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#langbuilder-api-keys",children:"Langbuilder API keys"}),": For authentication with the Langbuilder API and authorizing server-side Langbuilder actions like running flows and uploading files."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#component-api-keys",children:"Component API keys"}),": For authentication between Langbuilder and a service connected through a component, such as a model provider or third-party API."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.a,{href:"#authentication-environment-variables",children:"Authentication environment variables"}),": These environment variables configure how Langbuilder handles user authentication and authorization."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"langbuilder-api-keys",children:"Langbuilder API keys"}),"\n",(0,s.jsx)(n.p,{children:"You can use Langbuilder API keys to interact with Langbuilder programmatically."}),"\n",(0,s.jsxs)(n.p,{children:["In Langbuilder version 1.5 and later, most API endpoints require a Langbuilder API key, even when ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN"})," is ",(0,s.jsx)(n.code,{children:"True"}),".\nFor more information, see ",(0,s.jsx)(n.a,{href:"#langbuilder-auto-login",children:(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"langbuilder-api-key-permissions",children:"Langbuilder API key permissions"}),"\n",(0,s.jsx)(n.p,{children:"A Langbuilder API key adopts the privileges of the user who created it.\nThis means that API keys you create have the same permissions and access that you do, including access to your flows, components, and Langbuilder database.\nA Langbuilder API key cannot be used to access resources outside of your own Langbuilder server."}),"\n",(0,s.jsx)(n.p,{children:"In single-user environments, you are always a superuser, and your Langbuilder API keys always have superuser privileges."}),"\n",(0,s.jsxs)(n.p,{children:["In multi-user environments, users who aren't superusers cannot use their API keys to access other users' resources.\nYou must ",(0,s.jsx)(n.a,{href:"#start-a-langbuilder-server-with-authentication-enabled",children:"start your Langbuilder server with authentication enabled"})," to allow user management and creation of non-superuser accounts."]}),"\n",(0,s.jsx)(n.h3,{id:"create-a-langbuilder-api-key",children:"Create a Langbuilder API key"}),"\n",(0,s.jsxs)(n.p,{children:["You can generate a Langbuilder API key in your Langbuilder ",(0,s.jsx)(n.strong,{children:"Settings"})," or with the Langbuilder CLI."]}),"\n",(0,s.jsxs)(n.p,{children:["The CLI option is required if your Langbuilder server is running in ",(0,s.jsx)(n.code,{children:"--backend-only"})," mode."]}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"settings",label:"Langbuilder Settings",default:!0,children:(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the Langbuilder header, click your profile icon, and then select ",(0,s.jsx)(n.strong,{children:"Settings"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Langbuilder API Keys"}),", and then click ",(0,s.jsx)(n.strong,{children:"Add New"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Name your key, and then click ",(0,s.jsx)(n.strong,{children:"Create API Key"}),"."]}),"\n",(0,s.jsx)(n.li,{children:"Copy the API key and store it securely."}),"\n"]})}),(0,s.jsxs)(l.A,{value:"Langbuilder CLI",label:"Langbuilder CLI",children:[(0,s.jsxs)(n.p,{children:["If you're serving your flow with ",(0,s.jsx)(n.code,{children:"--backend-only=true"}),", you can't create API keys in your Langbuilder ",(0,s.jsx)(n.strong,{children:"Settings"})," because the frontend isn't running.\nIn this case, you must create API keys with the Langbuilder CLI."]}),(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Recommended: ",(0,s.jsx)(n.a,{href:"#start-a-langbuilder-server-with-authentication-enabled",children:"Start your Langbuilder server with authentication enabled"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"This configuration is recommended for security reasons to prevent unauthorized API key and superuser creation, especially in production environments."}),"\n",(0,s.jsxs)(n.p,{children:["However, if authentication isn't enabled (",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=True"}),"), all users are effectively superusers, and they can create API keys with the Langbuilder CLI."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create an API key with ",(0,s.jsx)(n.a,{href:"/configuration-cli#langbuilder-api-key",children:(0,s.jsx)(n.code,{children:"langbuilder api-key"})}),":"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"uv ",props:{style:{color:"#FFA657"}}},{content:"run langbuilder api-key",props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]}),"\n",(0,s.jsx)(n.p,{children:"All API keys created with the Langbuilder CLI have superuser privileges because the command requires superuser authentication, and Langbuilder API keys adopt the privileges of the user who created them."}),"\n"]}),"\n"]})]})]}),"\n",(0,s.jsx)(n.h3,{id:"use-a-langbuilder-api-key",children:"Use a Langbuilder API key"}),"\n",(0,s.jsxs)(n.p,{children:["To authenticate Langbuilder API requests, pass your Langbuilder API key an ",(0,s.jsx)(n.code,{children:"x-api-key"})," header or query parameter."]}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"header",label:"HTTP header",default:!0,children:(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"curl ",props:{style:{color:"#FFA657"}}},{content:"-X ",props:{style:{color:"#79C0FF"}}},{content:"POST ",props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:'  "http://',props:{style:{color:"#A5D6FF"}}},{content:"$LANGBUILDER_SERVER_ADDRESS",props:{style:{color:"#C9D1D9"}}},{content:"/api/v1/run/",props:{style:{color:"#A5D6FF"}}},{content:"$FLOW_ID",props:{style:{color:"#C9D1D9"}}},{content:'?stream=false" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -H ",props:{style:{color:"#79C0FF"}}},{content:'"Content-Type: application/json" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -H ",props:{style:{color:"#79C0FF"}}},{content:'"x-api-key: ',props:{style:{color:"#A5D6FF"}}},{content:"$LANGBUILDER_API_KEY",props:{style:{color:"#C9D1D9"}}},{content:'" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -d ",props:{style:{color:"#79C0FF"}}},{content:'\'{"inputs": {"text":""}, "tweaks": {}}\'',props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]})}),(0,s.jsx)(l.A,{value:"parameter",label:"Query parameter",children:(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"curl ",props:{style:{color:"#FFA657"}}},{content:"-X ",props:{style:{color:"#79C0FF"}}},{content:"POST ",props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:'  "http://',props:{style:{color:"#A5D6FF"}}},{content:"$LANGBUILDER_SERVER_ADDRESS",props:{style:{color:"#C9D1D9"}}},{content:"/api/v1/run/",props:{style:{color:"#A5D6FF"}}},{content:"$FLOW_ID",props:{style:{color:"#C9D1D9"}}},{content:"?x-api-key=",props:{style:{color:"#A5D6FF"}}},{content:"$LANGBUILDER_API_KEY",props:{style:{color:"#C9D1D9"}}},{content:'" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -H ",props:{style:{color:"#79C0FF"}}},{content:'"Content-Type: application/json" ',props:{style:{color:"#A5D6FF"}}},{content:"\\",props:{style:{color:"#79C0FF"}}}]},{tokens:[{content:"  -d ",props:{style:{color:"#79C0FF"}}},{content:'\'{"inputs": {"text":""}, "tweaks": {}}\'',props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]})})]}),"\n",(0,s.jsxs)(n.p,{children:["For more information about forming Langbuilder API requests, see ",(0,s.jsx)(n.a,{href:"/api-reference-api-examples",children:"Get started with the Langbuilder API"})," and ",(0,s.jsx)(n.a,{href:"/concepts-publish",children:"Trigger flows with the Langbuilder API"}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"revoke-an-api-key",children:"Revoke an API key"}),"\n",(0,s.jsx)(n.p,{children:"To revoke and delete an API key, do the following:"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["In the Langbuilder header, click your profile icon, and then select ",(0,s.jsx)(n.strong,{children:"Settings"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Langbuilder API Keys"}),"."]}),"\n",(0,s.jsxs)(n.li,{children:["Select the keys you want to delete, and then click ",(0,s.jsx)(c.A,{name:"Trash2","aria-hidden":"true"})," ",(0,s.jsx)(n.strong,{children:"Delete"}),"."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"This action immediately invalidates the key and prevents it from being used again."}),"\n",(0,s.jsx)(n.h2,{id:"component-api-keys",children:"Component API keys"}),"\n",(0,s.jsx)(n.p,{children:"Component API keys authorize access to external services that are called by components in your flows, such as model providers, databases, or third-party APIs.\nThese aren't Langbuilder API keys or general application credentials."}),"\n",(0,s.jsxs)(n.p,{children:["In Langbuilder, you can store component API keys in global variables in your ",(0,s.jsx)(n.strong,{children:"Settings"})," or import them from your Langbuilder ",(0,s.jsx)(n.code,{children:".env"})," file.\nWhen creating global variables, use the ",(0,s.jsx)(n.strong,{children:"Credential"})," type for secure handling of sensitive information.\nFor more information, see ",(0,s.jsx)(n.a,{href:"/configuration-global-variables",children:"Global variables"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"You create and manage component API keys within the service provider's platform.\nLangbuilder only stores the encrypted key value or a secure reference to a key stored elsewhere; it doesn't manage the actual credentials at the source.\nThis means that deleting a global variable from Langbuilder doesn't delete or invalidate the actual API key in the service provider's system.\nYou must delete or rotate component API keys directly using the service provider's interface or API."}),"\n",(0,s.jsx)(n.h2,{id:"authentication-environment-variables",children:"Authentication environment variables"}),"\n",(0,s.jsx)(n.p,{children:"This section describes the available authentication configuration variables."}),"\n",(0,s.jsxs)(n.p,{children:["You can use the ",(0,s.jsx)(n.a,{href:"https://github.com/cloudgeometry/langbuilder/blob/main/.env.example",children:(0,s.jsx)(n.code,{children:".env.example"})})," file in the Langbuilder repository as a template for your own ",(0,s.jsx)(n.code,{children:".env"})," file."]}),"\n",(0,s.jsx)(n.h3,{id:"langbuilder-auto-login",children:"LANGBUILDER_AUTO_LOGIN"}),"\n",(0,s.jsx)(n.p,{children:"This variable controls whether authentication is required to access your Langbuilder server, including the visual editor and API:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=False"}),", automatic login is disabled. Users must sign in to the visual editor and use a Langbuilder API key for Langbuilder API requests.\nIf false, you must also set ",(0,s.jsxs)(n.a,{href:"#langbuilder-superuser",children:[(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER_PASSWORD"})]}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["If ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=True"}),", Langbuilder bypasses authentication for the visual editor and API requests.\nAll users can access the same environment without password protection.\nIf you don't have user management enabled, all users are effectively superusers."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["Langbuilder doesn't allow users to simultaneously edit the same flow in real time.\nIf two users edit the same flow, Langbuilder saves only the work of the most recent editor based on the state of that user's ",(0,s.jsx)(n.a,{href:"/concepts-overview#workspace",children:"workspace"}),". Any changes made by the other user in the interim are overwritten."]}),"\n",(0,s.jsx)(n.h4,{id:"auto_login-and-api-authentication-in-version-15-and-later",children:"AUTO_LOGIN and API authentication in version 1.5 and later"}),"\n",(0,s.jsxs)(n.p,{children:["In Langbuilder versions 1.5 and later, most API endpoints require a Langbuilder API key, even when ",(0,s.jsx)(n.code,{children:"AUTO_LOGIN"})," is true.\nThe only exceptions are the MCP endpoints ",(0,s.jsx)(n.code,{children:"/v1/mcp"}),", ",(0,s.jsx)(n.code,{children:"/v1/mcp-projects"}),", and ",(0,s.jsx)(n.code,{children:"/v2/mcp"}),", which never require authentication."]}),"\n",(0,s.jsxs)(t,{children:[(0,s.jsx)("summary",{children:"LANGBUILDER_AUTO_LOGIN and LANGBUILDER_SKIP_AUTH_AUTO_LOGIN options"}),(0,s.jsxs)(n.p,{children:["In Langbuilder versions earlier than 1.5, if ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=True"}),", then Langbuilder automatically logs users in as a superuser without requiring authentication.\nIn this case, API requests don't require a Langbuilder API key."]}),(0,s.jsxs)(n.p,{children:["In Langbuilder version 1.5, you can set ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SKIP_AUTH_AUTO_LOGIN=True"})," ",(0,s.jsx)(n.em,{children:"and"})," ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=True"})," to skip authentication for API requests ",(0,s.jsx)(n.em,{children:"and"})," allow automatic login as a superuser for all users.\nThis is a temporary bypass for backwards compatibility, and the ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SKIP_AUTH_AUTO_LOGIN"})," option will be removed in a future release."]}),(0,s.jsxs)(n.p,{children:["If either ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN"})," or ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SKIP_AUTH_AUTO_LOGIN"})," are false, then authentication is required."]})]}),"\n",(0,s.jsx)(n.h3,{id:"langbuilder-enable-superuser-cli",children:"LANGBUILDER_ENABLE_SUPERUSER_CLI"}),"\n",(0,s.jsxs)(n.p,{children:["Controls the availability of the ",(0,s.jsx)(n.code,{children:"langbuilder superuser"})," command in the Langbuilder CLI.\nThe default is true, but false is recommended to prevent unrestricted superuser creation.\nFor more information, see ",(0,s.jsx)(n.a,{href:"/configuration-cli#langbuilder-superuser",children:(0,s.jsx)(n.code,{children:"langbuilder superuser"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"langbuilder-superuser",children:"LANGBUILDER_SUPERUSER and LANGBUILDER_SUPERUSER_PASSWORD"}),"\n",(0,s.jsx)(n.p,{children:"These variables specify the username and password for the Langbuilder server's superuser."}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"LANGBUILDER_SUPERUSER=administrator",props:{}}]},{tokens:[{content:"LANGBUILDER_SUPERUSER_PASSWORD=securepassword",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["They are required if ",(0,s.jsx)(n.code,{children:"LANGBUILDER_AUTO_LOGIN=False"}),".\nOtherwise, they aren't relevant."]}),"\n",(0,s.jsxs)(n.p,{children:["If required and not set in when you ",(0,s.jsx)(n.a,{href:"#start-a-langbuilder-server-with-authentication-enabled",children:"start a Langbuilder server with authentication enabled"}),", then the default values are ",(0,s.jsx)(n.code,{children:"langbuilder"})," and ",(0,s.jsx)(n.code,{children:"langbuilder"})," for system auto-login behavior.\nThese defaults don't apply when using the Langbuilder CLI command ",(0,s.jsx)(n.a,{href:"/configuration-cli#langbuilder-superuser",children:(0,s.jsx)(n.code,{children:"langbuilder superuser"})}),"."]}),"\n",(0,s.jsx)(n.h3,{id:"langbuilder-secret-key",children:"LANGBUILDER_SECRET_KEY"}),"\n",(0,s.jsxs)(n.p,{children:["This environment variable stores a secret key used for encrypting sensitive data like API keys.\nLangbuilder uses the ",(0,s.jsx)(n.a,{href:"https://pypi.org/project/cryptography/",children:"Fernet"})," library for secret key encryption."]}),"\n",(0,s.jsx)(n.p,{children:"If no secret key is provided, Langbuilder automatically generates one."}),"\n",(0,s.jsx)(n.p,{children:"However, you should generate and explicitly set your own key in production environments.\nThis is particularly important for multi-instance deployments like Kubernetes to ensure consistent encryption across instances."}),"\n",(0,s.jsxs)(n.p,{children:["To generate a secret encryption key for ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SECRET_KEY"}),", do the following:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Run the command to generate and copy a secret to the clipboard."}),"\n",(0,s.jsxs)(o.A,{children:[(0,s.jsx)(l.A,{value:"unix",label:"macOS or Linux",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"macOS"}),": Generate a secret key and copy it to the clipboard:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python3 ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'LANGBUILDER_SECRET_KEY={token_urlsafe(32)}')\" ",props:{style:{color:"#A5D6FF"}}},{content:"| ",props:{style:{color:"#FF7B72"}}},{content:"pbcopy",props:{style:{color:"#FFA657"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Linux"}),": Generate a secret key and copy it to the clipboard:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python3 ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'LANGBUILDER_SECRET_KEY={token_urlsafe(32)}')\" ",props:{style:{color:"#A5D6FF"}}},{content:"| ",props:{style:{color:"#FF7B72"}}},{content:"xclip ",props:{style:{color:"#FFA657"}}},{content:"-selection ",props:{style:{color:"#79C0FF"}}},{content:"clipboard",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Unix"}),": Generate a secret key and print it to the terminal to manually copy it:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python3 ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'LANGBUILDER_SECRET_KEY={token_urlsafe(32)}')\"",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n"]})}),(0,s.jsx)(l.A,{value:"windows",label:"Windows",children:(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a secret key and copy it to the clipboard:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"python ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'LANGBUILDER_SECRET_KEY={token_urlsafe(32)}')\"",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"Generate a secret key and print it to the terminal to manually copy it:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Or just print",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"python ",props:{style:{color:"#FFA657"}}},{content:"-c ",props:{style:{color:"#79C0FF"}}},{content:"\"from secrets import token_urlsafe; print(f'LANGBUILDER_SECRET_KEY={token_urlsafe(32)}')\"",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n"]})})]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Paste the value into your ",(0,s.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"LANGBUILDER_SECRET_KEY=dBuu...2kM2_fb",props:{}}]}],lang:"text"},annotations:[]}]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h3,{id:"langbuilder-new-user-is-active",children:"LANGBUILDER_NEW_USER_IS_ACTIVE"}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"LANGBUILDER_NEW_USER_IS_ACTIVE=False"})," (default), a superuser must explicitly activate a new user's account before they can sign in to the visual editor.\nThe superuser can also deactivate a user's account as needed."]}),"\n",(0,s.jsxs)(n.p,{children:["When ",(0,s.jsx)(n.code,{children:"LANGBUILDER_NEW_USER_IS_ACTIVE=True"}),", new user accounts are automatically activated."]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"LANGBUILDER_NEW_USER_IS_ACTIVE=False",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["Only superusers can manage user accounts for a Langbuilder server, but user management only matters if your server has authentication enabled.\nFor more information, see ",(0,s.jsx)(n.a,{href:"#start-a-langbuilder-server-with-authentication-enabled",children:"Start a Langbuilder server with authentication enabled"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"start-a-langbuilder-server-with-authentication-enabled",children:"Start a Langbuilder server with authentication enabled"}),"\n",(0,s.jsxs)(n.p,{children:["This section shows you how to use the ",(0,s.jsx)(n.a,{href:"/api-keys-and-authentication#authentication-environment-variables",children:"authentication environment variables"})," to deploy a Langbuilder server with authentication enabled.\nThis involves disabling automatic login, setting superuser credentials, generating a secret encryption key, and enabling user management."]}),"\n",(0,s.jsx)(n.p,{children:"This configuration is recommended for any deployment where Langbuilder is exposed to a shared or public network, or where multiple users access the same Langbuilder server."}),"\n",(0,s.jsxs)(n.p,{children:["With authentication enabled, all users must sign in to the visual editor with valid credentials, and API requests require authentication with a Langbuilder API key.\nAdditionally, you must sign in as a superuser to manage users and ",(0,s.jsx)(n.a,{href:"#create-a-langbuilder-api-key",children:"create a Langbuilder API key"})," with superuser privileges."]}),"\n",(0,s.jsx)(n.h3,{id:"start-the-langbuilder-server",children:"Start the Langbuilder server"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Create a ",(0,s.jsx)(n.code,{children:".env"})," file with the following variables:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"LANGBUILDER_AUTO_LOGIN=False",props:{}}]},{tokens:[{content:"LANGBUILDER_SUPERUSER=",props:{}}]},{tokens:[{content:"LANGBUILDER_SUPERUSER_PASSWORD=",props:{}}]},{tokens:[{content:"LANGBUILDER_SECRET_KEY=",props:{}}]},{tokens:[{content:"LANGBUILDER_NEW_USER_IS_ACTIVE=False",props:{}}]},{tokens:[{content:"LANGBUILDER_ENABLE_SUPERUSER_CLI=False",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["Your ",(0,s.jsx)(n.code,{children:".env"})," file can have other environment variables.\nThis example focuses on authentication variables."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Set ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER_PASSWORD"})," to your desired superuser credentials."]}),"\n",(0,s.jsxs)(n.p,{children:["For a one-time test, you can use basic credentials like ",(0,s.jsx)(n.code,{children:"administrator"})," and ",(0,s.jsx)(n.code,{children:"password"}),".\nStrong, securely-stored credentials are recommended in genuine development and production environments."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Recommended: Generate and set a ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SECRET_KEY"})," for encrypting sensitive data."]}),"\n",(0,s.jsx)(n.p,{children:"If you don't set a secret key, Langbuilder generates one automatically, but this isn't recommended for production environments."}),"\n",(0,s.jsxs)(n.p,{children:["For instructions on generating at setting a secret key, see ",(0,s.jsx)(n.a,{href:"#langbuilder-secret-key",children:(0,s.jsx)(n.code,{children:"LANGBUILDER_SECRET_KEY"})}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Save your ",(0,s.jsx)(n.code,{children:".env"})," file with the populated variables. For example:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"LANGBUILDER_AUTO_LOGIN=False",props:{}}]},{tokens:[{content:"LANGBUILDER_SUPERUSER=administrator",props:{}}]},{tokens:[{content:"LANGBUILDER_SUPERUSER_PASSWORD=securepassword",props:{}}]},{tokens:[{content:"LANGBUILDER_SECRET_KEY=dBuu...2kM2_fb",props:{}}]},{tokens:[{content:"LANGBUILDER_NEW_USER_IS_ACTIVE=False",props:{}}]},{tokens:[{content:"LANGBUILDER_ENABLE_SUPERUSER_CLI=False",props:{}}]}],lang:"text"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Start Langbuilder with the configuration from your ",(0,s.jsx)(n.code,{children:".env"})," file:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:g,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"uv run langbuilder run --env-file .env",props:{}}]}],lang:"text"},annotations:[]}]}),"\n",(0,s.jsxs)(n.p,{children:["Starting Langbuilder with an ",(0,s.jsx)(n.code,{children:".env"})," file automatically authenticates you as the superuser set in ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER_PASSWORD"}),".\nIf you don't explicitly set these variables, the default values are ",(0,s.jsx)(n.code,{children:"langbuilder"})," and ",(0,s.jsx)(n.code,{children:"langbuilder"})," for system auto-login."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Verify the server is running. The default location is ",(0,s.jsx)(n.code,{children:"http://localhost:7860"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:"Next, you can add users to your Langbuilder server to collaborate with others on flows."}),"\n",(0,s.jsx)(n.h3,{id:"manage-users-as-an-administrator",children:"Manage users as an administrator"}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To complete your first-time login as a superuser, go to ",(0,s.jsx)(n.code,{children:"http://localhost:7860/login"}),"."]}),"\n",(0,s.jsxs)(n.p,{children:["If you aren't using the default location, replace ",(0,s.jsx)(n.code,{children:"localhost:7860"})," with your server's address."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["Log in with the superuser credentials you set in your ",(0,s.jsx)(n.code,{children:".env"})," (",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER"})," and ",(0,s.jsx)(n.code,{children:"LANGBUILDER_SUPERUSER_PASSWORD"}),")."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To manage users on your server, navigate to ",(0,s.jsx)(n.code,{children:"/admin"}),", such as ",(0,s.jsx)(n.code,{children:"http://localhost:7860/admin"}),", click your profile icon, and then click ",(0,s.jsx)(n.strong,{children:"Admin Page"}),"."]}),"\n",(0,s.jsx)(n.p,{children:"As a superuser, you can add users, set permissions, reset passwords, and delete accounts."}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:["To add a user, click ",(0,s.jsx)(n.strong,{children:"New User"}),", and then complete the user account form:"]}),"\n",(0,s.jsxs)(n.ol,{children:["\n",(0,s.jsx)(n.li,{children:"Enter a username and password."}),"\n",(0,s.jsxs)(n.li,{children:["To activate the account immediately, select ",(0,s.jsx)(n.strong,{children:"Active"}),". Inactive users cannot sign in or access flows they created before becoming inactive."]}),"\n",(0,s.jsxs)(n.li,{children:["Deselect ",(0,s.jsx)(n.strong,{children:"Superuser"})," if you don't want the user to have full administrative privileges."]}),"\n",(0,s.jsxs)(n.li,{children:["Click ",(0,s.jsx)(n.strong,{children:"Save"}),". The new user appears in the ",(0,s.jsx)(n.strong,{children:"Admin Page"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsx)(n.p,{children:"To test the new user's access, sign out of Langbuilder, and then sign in with the new user's credentials."}),"\n",(0,s.jsxs)(n.p,{children:["Try to access the ",(0,s.jsx)(n.code,{children:"/admin"})," page.\nYou are redirected to the ",(0,s.jsx)(n.code,{children:"/flows"})," page if the new user isn't a superuser."]}),"\n"]}),"\n"]})]})}function x(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(y,{...e})}):y(e)}function f(e,n){throw new Error("Expected "+(n?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}},11470:(e,n,t)=>{t.d(n,{A:()=>L});var r=t(96540),s=t(18215),i=t(23104),a=t(56347),o=t(205),l=t(57485),c=t(31682),d=t(70679);function u(e){return r.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,r.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:t}=e;return(0,r.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:t,default:r}})=>({value:e,label:n,attributes:t,default:r}))}(t);return function(e){const n=(0,c.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,t])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function g({queryString:e=!1,groupId:n}){const t=(0,a.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,l.aZ)(s),(0,r.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(t.location.search);n.set(s,e),t.replace({...t.location,search:n.toString()})},[s,t])]}function b(e){const{defaultValue:n,queryString:t=!1,groupId:s}=e,i=h(e),[a,l]=(0,r.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const t=n.find(e=>e.default)??n[0];if(!t)throw new Error("Unexpected error: 0 tabValues");return t.value}({defaultValue:n,tabValues:i})),[c,u]=g({queryString:t,groupId:s}),[b,y]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[t,s]=(0,d.Dv)(n);return[t,(0,r.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),x=(()=>{const e=c??b;return p({value:e,tabValues:i})?e:null})();(0,o.A)(()=>{x&&l(x)},[x]);return{selectedValue:a,selectValue:(0,r.useCallback)(e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);l(e),u(e),y(e)},[u,y,i]),tabValues:i}}var y=t(92303);const x={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var f=t(74848);function m({className:e,block:n,selectedValue:t,selectValue:r,tabValues:a}){const o=[],{blockElementScrollPositionUntilNextRender:l}=(0,i.a_)(),c=e=>{const n=e.currentTarget,s=o.indexOf(n),i=a[s].value;i!==t&&(l(n),r(i))},d=e=>{let n=null;switch(e.key){case"Enter":c(e);break;case"ArrowRight":{const t=o.indexOf(e.currentTarget)+1;n=o[t]??o[0];break}case"ArrowLeft":{const t=o.indexOf(e.currentTarget)-1;n=o[t]??o[o.length-1];break}}n?.focus()};return(0,f.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:a.map(({value:e,label:n,attributes:r})=>(0,f.jsx)("li",{role:"tab",tabIndex:t===e?0:-1,"aria-selected":t===e,ref:e=>{o.push(e)},onKeyDown:d,onClick:c,...r,className:(0,s.A)("tabs__item",x.tabItem,r?.className,{"tabs__item--active":t===e}),children:n??e},e))})}function v({lazy:e,children:n,selectedValue:t}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===t);return e?(0,r.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,f.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,r.cloneElement)(e,{key:n,hidden:e.props.value!==t}))})}function j(e){const n=b(e);return(0,f.jsxs)("div",{className:(0,s.A)("tabs-container",x.tabList),children:[(0,f.jsx)(m,{...n,...e}),(0,f.jsx)(v,{...n,...e})]})}function L(e){const n=(0,y.A)();return(0,f.jsx)(j,{...e,children:u(e.children)},String(n))}},17886:(e,n,t)=>{t.d(n,{A:()=>i});t(96540);var r=t(64058),s=t(74848);function i({name:e,...n}){const t=r[e];return t?(0,s.jsx)(t,{...n}):null}},19365:(e,n,t)=>{t.d(n,{A:()=>a});t(96540);var r=t(18215);const s={tabItem:"tabItem_Ymn6"};var i=t(74848);function a({children:e,hidden:n,className:t}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,r.A)(s.tabItem,t),hidden:n,children:e})}}}]);