"use strict";(self.webpackChunklangbuilder_docs=self.webpackChunklangbuilder_docs||[]).push([[7512],{28453:(e,o,t)=>{t.d(o,{R:()=>c,x:()=>l});var n=t(96540);const s={},r=n.createContext(s);function c(e){const o=n.useContext(r);return n.useMemo(function(){return"function"==typeof e?e(o):{...o,...e}},[o,e])}function l(e){let o;return o=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:c(e.components),n.createElement(r.Provider,{value:o},e.children)}},45794:(e,o,t)=>{t.r(o),t.d(o,{CH:()=>p,assets:()=>a,chCodeConfig:()=>d,contentTitle:()=>i,default:()=>y,frontMatter:()=>l,metadata:()=>n,toc:()=>h});const n=JSON.parse('{"id":"Deployment/deployment-docker","title":"Deploy Langbuilder on Docker","description":"Running applications in Docker containers ensures consistent behavior across different systems and eliminates dependency conflicts.","source":"@site/docs/Deployment/deployment-docker.mdx","sourceDirName":"Deployment","slug":"/deployment-docker","permalink":"/deployment-docker","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Deploy Langbuilder on Docker","slug":"/deployment-docker"},"sidebar":"docs","previous":{"title":"Containerize a Langbuilder application","permalink":"/develop-application"},"next":{"title":"Deploy Langbuilder on a remote server","permalink":"/deployment-caddyfile"}}');var s=t(74848),r=t(28453),c=t(24754);const l={title:"Deploy Langbuilder on Docker",slug:"/deployment-docker"},i=void 0,a={},p={annotations:c.hk,Code:c.Cy},d={staticMediaQuery:"not screen, (max-width: 768px)",lineNumbers:!0,showCopyButton:!0,themeName:"github-dark"},h=[{value:"Quickstart: Start a Langbuilder container with default values",id:"quickstart",level:2},{value:"Clone the repo and run the Langbuilder Docker container",id:"clone",level:2},{value:"Customize your deployment",id:"customize-your-deployment",level:3},{value:"Package your flow as a Docker image",id:"package-your-flow-as-a-docker-image",level:2},{value:"Customize the Langbuilder Docker image with your own code",id:"customize-the-langbuilder-docker-image",level:2}];function u(e){const o={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",strong:"strong",ul:"ul",...(0,r.R)(),...e.components};return p||g("CH",!1),p.Code||g("CH.Code",!0),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("style",{dangerouslySetInnerHTML:{__html:'[data-ch-theme="github-dark"] {  --ch-t-colorScheme: dark;--ch-t-foreground: #c9d1d9;--ch-t-background: #0d1117;--ch-t-lighter-inlineBackground: #0d1117e6;--ch-t-editor-background: #0d1117;--ch-t-editor-foreground: #c9d1d9;--ch-t-editor-lineHighlightBackground: #6e76811a;--ch-t-editor-rangeHighlightBackground: #ffffff0b;--ch-t-editor-infoForeground: #3794FF;--ch-t-editor-selectionBackground: #264F78;--ch-t-focusBorder: #1f6feb;--ch-t-tab-activeBackground: #0d1117;--ch-t-tab-activeForeground: #c9d1d9;--ch-t-tab-inactiveBackground: #010409;--ch-t-tab-inactiveForeground: #8b949e;--ch-t-tab-border: #30363d;--ch-t-tab-activeBorder: #0d1117;--ch-t-editorGroup-border: #30363d;--ch-t-editorGroupHeader-tabsBackground: #010409;--ch-t-editorLineNumber-foreground: #6e7681;--ch-t-input-background: #0d1117;--ch-t-input-foreground: #c9d1d9;--ch-t-input-border: #30363d;--ch-t-icon-foreground: #8b949e;--ch-t-sideBar-background: #010409;--ch-t-sideBar-foreground: #c9d1d9;--ch-t-sideBar-border: #30363d;--ch-t-list-activeSelectionBackground: #6e768166;--ch-t-list-activeSelectionForeground: #c9d1d9;--ch-t-list-hoverBackground: #6e76811a;--ch-t-list-hoverForeground: #c9d1d9; }'}}),"\n",(0,s.jsx)(o.p,{children:"Running applications in Docker containers ensures consistent behavior across different systems and eliminates dependency conflicts."}),"\n",(0,s.jsx)(o.p,{children:"You can use the Langbuilder Docker image to start a Langbuilder container."}),"\n",(0,s.jsxs)(o.p,{children:["This guide demonstrates several ways to deploy Langbuilder with ",(0,s.jsx)(o.a,{href:"https://docs.docker.com/",children:"Docker"})," and ",(0,s.jsx)(o.a,{href:"https://docs.docker.com/compose/",children:"Docker Compose"}),":"]}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.a,{href:"#quickstart",children:"Quickstart"}),": Start a Langbuilder container with default values."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.a,{href:"#clone",children:"Use Docker Compose"}),": Clone the Langbuilder repo, and then use Docker Compose to build the Langbuilder Docker container.\nThis option provides more control over the configuration, including a persistent PostgreSQL database service, while still using the base Langbuilder Docker image."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.a,{href:"#package-your-flow-as-a-docker-image",children:"Create a custom flow image"}),": Use a Dockerfile to package a flow as a Docker image."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.a,{href:"#customize-the-langbuilder-docker-image",children:"Create a custom Langbuilder image"}),": Use a Dockerfile to package a custom Langbuilder Docker image that includes your own code, custom dependencies, or other modifications."]}),"\n"]}),"\n",(0,s.jsx)(o.h2,{id:"quickstart",children:"Quickstart: Start a Langbuilder container with default values"}),"\n",(0,s.jsx)(o.p,{children:"With Docker installed and running on your system, run the following command:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"run ",props:{style:{color:"#A5D6FF"}}},{content:"-p ",props:{style:{color:"#79C0FF"}}},{content:"7860:",props:{style:{color:"#A5D6FF"}}},{content:"7860 ",props:{style:{color:"#79C0FF"}}},{content:"nickchasecg/langbuilder:latest",props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]}),"\n",(0,s.jsxs)(o.p,{children:["Then, access Langbuilder at ",(0,s.jsx)(o.code,{children:"http://localhost:7860/"}),"."]}),"\n",(0,s.jsxs)(o.p,{children:["This container runs a pre-built Docker image with default settings.\nFor more control over the configuration, see ",(0,s.jsx)(o.a,{href:"#clone",children:"Clone the repo and run the Langbuilder Docker container"}),"."]}),"\n",(0,s.jsx)(o.h2,{id:"clone",children:"Clone the repo and run the Langbuilder Docker container"}),"\n",(0,s.jsx)(o.p,{children:"Cloning the Langbuilder repository and using Docker Compose gives you more control over your configuration, allowing you to customize environment variables, use a persistent PostgreSQL database service (instead of the default SQLite database), and include custom dependencies."}),"\n",(0,s.jsx)(o.p,{children:"The default deployment with Docker Compose includes the following:"}),"\n",(0,s.jsxs)(o.ul,{children:["\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"Langbuilder service"}),": Runs the latest Langbuilder image with PostgreSQL as the database."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"PostgreSQL service"}),": Provides persistent data storage for flows, users, and settings."]}),"\n",(0,s.jsxs)(o.li,{children:[(0,s.jsx)(o.strong,{children:"Persistent volumes"}),": Ensures your data survives container restarts."]}),"\n"]}),"\n",(0,s.jsxs)(o.p,{children:["The complete Docker Compose configuration is available in ",(0,s.jsx)(o.code,{children:"docker_example/docker-compose.yml"}),"."]}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Clone the Langbuilder repository:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"git ",props:{style:{color:"#FFA657"}}},{content:"clone https://github.com/cloudgeometry/langbuilder.git",props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Navigate to the ",(0,s.jsx)(o.code,{children:"docker_example"})," directory:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"cd ",props:{style:{color:"#79C0FF"}}},{content:"langbuilder/docker_example",props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Run the Docker Compose file:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"compose up",props:{style:{color:"#A5D6FF"}}}]}],lang:"shell"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Access Langbuilder at ",(0,s.jsx)(o.code,{children:"http://localhost:7860/"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(o.h3,{id:"customize-your-deployment",children:"Customize your deployment"}),"\n",(0,s.jsx)(o.p,{children:"You can customize the Docker Compose configuration to fit your specific deployment."}),"\n",(0,s.jsxs)(o.p,{children:["For example, to configure the container's database credentials using a ",(0,s.jsx)(o.code,{children:".env"})," file, do the following:"]}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Create a ",(0,s.jsx)(o.code,{children:".env"})," file with your database credentials in the same directory as ",(0,s.jsx)(o.code,{children:"docker-compose.yml"}),":"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"# Database credentials",props:{}}]},{tokens:[{content:"POSTGRES_USER=myuser",props:{}}]},{tokens:[{content:"POSTGRES_PASSWORD=mypassword",props:{}}]},{tokens:[{content:"POSTGRES_DB=langbuilder",props:{}}]},{tokens:[{content:"",props:{}}]},{tokens:[{content:"# Langbuilder configuration",props:{}}]},{tokens:[{content:"LANGBUILDER_DATABASE_URL=postgresql://myuser:mypassword@postgres:5432/langbuilder",props:{}}]},{tokens:[{content:"LANGBUILDER_CONFIG_DIR=/app/langbuilder",props:{}}]}],lang:"text"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Modify the ",(0,s.jsx)(o.code,{children:"docker-compose.yml"})," file to reference the ",(0,s.jsx)(o.code,{children:".env"})," file for both the ",(0,s.jsx)(o.code,{children:"langbuilder"})," and ",(0,s.jsx)(o.code,{children:"postgres"})," services:"]}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"services",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"  langbuilder",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    environment",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"      - ",props:{style:{color:"#C9D1D9"}}},{content:"LANGBUILDER_DATABASE_URL=${LANGBUILDER_DATABASE_URL}",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"      - ",props:{style:{color:"#C9D1D9"}}},{content:"LANGBUILDER_CONFIG_DIR=${LANGBUILDER_CONFIG_DIR}",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"  postgres",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    environment",props:{style:{color:"#7EE787"}}},{content:":",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"      - ",props:{style:{color:"#C9D1D9"}}},{content:"POSTGRES_USER=${POSTGRES_USER}",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"      - ",props:{style:{color:"#C9D1D9"}}},{content:"POSTGRES_PASSWORD=${POSTGRES_PASSWORD}",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"      - ",props:{style:{color:"#C9D1D9"}}},{content:"POSTGRES_DB=${POSTGRES_DB}",props:{style:{color:"#A5D6FF"}}}]}],lang:"yaml"},annotations:[]}]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(o.p,{children:["For a complete list of available environment variables, see ",(0,s.jsx)(o.a,{href:"/environment-variables",children:"Langbuilder environment variables"}),"."]}),"\n",(0,s.jsxs)(o.p,{children:["For more customization options, see ",(0,s.jsx)(o.a,{href:"#customize-the-langbuilder-docker-image",children:"Customize the Langbuilder Docker image with your own code"}),"."]}),"\n",(0,s.jsx)(o.h2,{id:"package-your-flow-as-a-docker-image",children:"Package your flow as a Docker image"}),"\n",(0,s.jsx)(o.p,{children:"This section shows you how to create a Dockerfile that builds a Docker image containing your Langbuilder flow. This approach is useful when you want to distribute a specific flow as a standalone container or deploy it to environments like Kubernetes."}),"\n",(0,s.jsx)(o.p,{children:"Unlike the previous sections that use pre-built images, this method builds a custom image with your flow embedded inside it."}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Create a project directory, and change directory into it."}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"mkdir ",props:{style:{color:"#FFA657"}}},{content:"langbuilder-custom",props:{style:{color:"#A5D6FF"}}},{content:" && ",props:{style:{color:"#C9D1D9"}}},{content:"cd ",props:{style:{color:"#79C0FF"}}},{content:"langbuilder-custom",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Add your flow's JSON file to the directory. You can download an example, or use your own:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"# Download an example flow",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"wget ",props:{style:{color:"#FFA657"}}},{content:"https://raw.githubusercontent.com/cloudgeometry/langbuilder-helm-charts/refs/heads/main/examples/flows/basic-prompting-hello-world.json",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Or copy your own flow file",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"cp ",props:{style:{color:"#FFA657"}}},{content:"/path/to/your/flow.json .",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Create a Dockerfile to build your custom image:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"FROM",props:{style:{color:"#FF7B72"}}},{content:" nickchasecg/langbuilder:latest",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"RUN",props:{style:{color:"#FF7B72"}}},{content:" mkdir /app/flows",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"COPY",props:{style:{color:"#FF7B72"}}},{content:" ./*.json /app/flows/",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"ENV",props:{style:{color:"#FF7B72"}}},{content:" LANGBUILDER_LOAD_FLOWS_PATH=/app/flows",props:{style:{color:"#C9D1D9"}}}]}],lang:"dockerfile"},annotations:[]}]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"This Dockerfile uses the official Langbuilder image as the base, creates a directory for your flows, copies your JSON flow files into the directory, and sets the environment variable to tell Langbuilder where to find the flows."}),"\n",(0,s.jsxs)(o.ol,{start:"4",children:["\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Build and test your custom image:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"build ",props:{style:{color:"#A5D6FF"}}},{content:"-t ",props:{style:{color:"#79C0FF"}}},{content:"myuser/langbuilder-custom:",props:{style:{color:"#A5D6FF"}}},{content:"1.0.0 ",props:{style:{color:"#79C0FF"}}},{content:".",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"run ",props:{style:{color:"#A5D6FF"}}},{content:"-p ",props:{style:{color:"#79C0FF"}}},{content:"7860:",props:{style:{color:"#A5D6FF"}}},{content:"7860 ",props:{style:{color:"#79C0FF"}}},{content:"myuser/langbuilder-custom:",props:{style:{color:"#A5D6FF"}}},{content:"1.0.0",props:{style:{color:"#79C0FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Push your image to Docker Hub (optional):"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"push myuser/langbuilder-custom:",props:{style:{color:"#A5D6FF"}}},{content:"1.0.0",props:{style:{color:"#79C0FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(o.p,{children:["Your custom image now contains your flow and can be deployed anywhere Docker runs. For Kubernetes deployment, see ",(0,s.jsx)(o.a,{href:"/deployment-kubernetes-prod",children:"Deploy the Langbuilder production environment on Kubernetes"}),"."]}),"\n",(0,s.jsx)(o.h2,{id:"customize-the-langbuilder-docker-image",children:"Customize the Langbuilder Docker image with your own code"}),"\n",(0,s.jsx)(o.p,{children:"While the previous section showed how to package a flow with a Docker image, this section shows how to customize the Langbuilder application itself. This is useful when you need to add custom Python packages or dependencies, modify Langbuilder's configuration or settings, include custom components or tools, or add your own code to extend Langbuilder's functionality."}),"\n",(0,s.jsxs)(o.p,{children:["This example demonstrates how to customize the ",(0,s.jsx)(o.strong,{children:"Message History"})," component, but the same approach can be used for any code modifications."]}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"FROM",props:{style:{color:"#FF7B72"}}},{content:" nickchasecg/langbuilder:latest",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Set working directory",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"WORKDIR",props:{style:{color:"#FF7B72"}}},{content:" /app",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Copy your modified memory component",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"COPY",props:{style:{color:"#FF7B72"}}},{content:" src/backend/base/langbuilder/components/helpers/memory.py /tmp/memory.py",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Find the site-packages directory where langbuilder is installed",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"RUN",props:{style:{color:"#FF7B72"}}},{content:" python -c ",props:{style:{color:"#C9D1D9"}}},{content:'"import site; print(site.getsitepackages()[0])"',props:{style:{color:"#A5D6FF"}}},{content:" > /tmp/site_packages.txt",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Replace the file in the site-packages location",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"RUN",props:{style:{color:"#FF7B72"}}},{content:" SITE_PACKAGES=$(cat /tmp/site_packages.txt) && \\",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    echo ",props:{style:{color:"#C9D1D9"}}},{content:'"Site packages at: $SITE_PACKAGES"',props:{style:{color:"#A5D6FF"}}},{content:" && \\",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    mkdir -p ",props:{style:{color:"#C9D1D9"}}},{content:'"$SITE_PACKAGES/langbuilder/components/helpers"',props:{style:{color:"#A5D6FF"}}},{content:" && \\",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    cp /tmp/memory.py ",props:{style:{color:"#C9D1D9"}}},{content:'"$SITE_PACKAGES/langbuilder/components/helpers/"',props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Clear Python cache in the site-packages directory only",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"RUN",props:{style:{color:"#FF7B72"}}},{content:" SITE_PACKAGES=$(cat /tmp/site_packages.txt) && \\",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    find ",props:{style:{color:"#C9D1D9"}}},{content:'"$SITE_PACKAGES"',props:{style:{color:"#A5D6FF"}}},{content:" -name ",props:{style:{color:"#C9D1D9"}}},{content:'"*.pyc"',props:{style:{color:"#A5D6FF"}}},{content:" -delete && \\",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"    find ",props:{style:{color:"#C9D1D9"}}},{content:'"$SITE_PACKAGES"',props:{style:{color:"#A5D6FF"}}},{content:" -name ",props:{style:{color:"#C9D1D9"}}},{content:'"__pycache__"',props:{style:{color:"#A5D6FF"}}},{content:" -type d -exec rm -rf {} +",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Expose the default Langbuilder port",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"EXPOSE",props:{style:{color:"#FF7B72"}}},{content:" 7860",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"",props:{style:{color:"#C9D1D9"}}}]},{tokens:[{content:"# Command to run Langbuilder",props:{style:{color:"#8B949E"}}}]},{tokens:[{content:"CMD",props:{style:{color:"#FF7B72"}}},{content:" [",props:{style:{color:"#C9D1D9"}}},{content:'"python"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"-m"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"langbuilder"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"run"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"--host"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"0.0.0.0"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"--port"',props:{style:{color:"#A5D6FF"}}},{content:", ",props:{style:{color:"#C9D1D9"}}},{content:'"7860"',props:{style:{color:"#A5D6FF"}}},{content:"]",props:{style:{color:"#C9D1D9"}}}]}],lang:"dockerfile"},annotations:[]}]}),"\n",(0,s.jsx)(o.p,{children:"To use this custom Dockerfile, do the following:"}),"\n",(0,s.jsxs)(o.ol,{children:["\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Create a directory for your custom Langbuilder setup:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"mkdir ",props:{style:{color:"#FFA657"}}},{content:"langbuilder-custom",props:{style:{color:"#A5D6FF"}}},{content:" && ",props:{style:{color:"#C9D1D9"}}},{content:"cd ",props:{style:{color:"#79C0FF"}}},{content:"langbuilder-custom",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Create the necessary directory structure for your custom code.\nIn this example, Langbuilder expects ",(0,s.jsx)(o.code,{children:"memory.py"})," to exist in the ",(0,s.jsx)(o.code,{children:"/helpers"})," directory, so you create a directory in that location."]}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"mkdir ",props:{style:{color:"#FFA657"}}},{content:"-p ",props:{style:{color:"#79C0FF"}}},{content:"src/backend/base/langbuilder/components/helpers",props:{style:{color:"#A5D6FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Place your modified ",(0,s.jsx)(o.code,{children:"memory.py"})," file in the ",(0,s.jsx)(o.code,{children:"/helpers"})," directory."]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsxs)(o.p,{children:["Create a new file named ",(0,s.jsx)(o.code,{children:"Dockerfile"})," in your ",(0,s.jsx)(o.code,{children:"langbuilder-custom"})," directory, and then copy the Dockerfile contents shown above into it."]}),"\n"]}),"\n",(0,s.jsxs)(o.li,{children:["\n",(0,s.jsx)(o.p,{children:"Build and run the image:"}),"\n",(0,s.jsx)(p.Code,{codeConfig:d,northPanel:{tabs:[""],active:"",heightRatio:1},files:[{name:"",focus:"",code:{lines:[{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"build ",props:{style:{color:"#A5D6FF"}}},{content:"-t ",props:{style:{color:"#79C0FF"}}},{content:"myuser/langbuilder-custom:",props:{style:{color:"#A5D6FF"}}},{content:"1.0.0 ",props:{style:{color:"#79C0FF"}}},{content:".",props:{style:{color:"#A5D6FF"}}}]},{tokens:[{content:"docker ",props:{style:{color:"#FFA657"}}},{content:"run ",props:{style:{color:"#A5D6FF"}}},{content:"-p ",props:{style:{color:"#79C0FF"}}},{content:"7860:",props:{style:{color:"#A5D6FF"}}},{content:"7860 ",props:{style:{color:"#79C0FF"}}},{content:"myuser/langbuilder-custom:",props:{style:{color:"#A5D6FF"}}},{content:"1.0.0",props:{style:{color:"#79C0FF"}}}]}],lang:"bash"},annotations:[]}]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(o.p,{children:"This approach can be adapted for any other components or custom code you want to add to Langbuilder by modifying the file paths and component names."})]})}function y(e={}){const{wrapper:o}={...(0,r.R)(),...e.components};return o?(0,s.jsx)(o,{...e,children:(0,s.jsx)(u,{...e})}):u(e)}function g(e,o){throw new Error("Expected "+(o?"component":"object")+" `"+e+"` to be defined: you likely forgot to import, pass, or provide it.")}}}]);