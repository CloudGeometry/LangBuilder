"use strict";(self.webpackChunklangbuilder_docs=self.webpackChunklangbuilder_docs||[]).push([[9986],{4392:(e,n,r)=>{r.r(n),r.d(n,{assets:()=>a,contentTitle:()=>l,default:()=>u,frontMatter:()=>o,metadata:()=>t,toc:()=>d});const t=JSON.parse('{"id":"Deployment/deployment-architecture","title":"Langbuilder architecture on Kubernetes","description":"There are two broad types of Langbuilder deployments:","source":"@site/docs/Deployment/deployment-architecture.mdx","sourceDirName":"Deployment","slug":"/deployment-architecture","permalink":"/deployment-architecture","draft":false,"unlisted":false,"tags":[],"version":"current","frontMatter":{"title":"Langbuilder architecture on Kubernetes","slug":"/deployment-architecture"},"sidebar":"docs","previous":{"title":"Deploy Langbuilder on a remote server","permalink":"/deployment-caddyfile"},"next":{"title":"Best practices","permalink":"/deployment-prod-best-practices"}}');var s=r(74848),i=r(28453);r(11470),r(19365);const o={title:"Langbuilder architecture on Kubernetes",slug:"/deployment-architecture"},l=void 0,a={},d=[{value:"Benefits of deploying Langbuilder on Kubernetes",id:"benefits-of-deploying-langbuilder-on-kubernetes",level:2},{value:"Langbuilder deployment",id:"langbuilder-deployment",level:2},{value:"Environment isolation",id:"environment-isolation",level:2},{value:"Next steps",id:"next-steps",level:2}];function c(e){const n={a:"a",admonition:"admonition",code:"code",h2:"h2",img:"img",li:"li",p:"p",strong:"strong",ul:"ul",...(0,i.R)(),...e.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(n.p,{children:"There are two broad types of Langbuilder deployments:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Langbuilder IDE (development)"}),": Deploy both the Langbuilder visual editor (frontend) and API (backend). Typically, this is used for development environments where developers use the visual editor to create and manage flows before packaging and serving them through a production runtime deployment."]}),"\n",(0,s.jsxs)(n.p,{children:["The Langbuilder repository's example ",(0,s.jsx)(n.a,{href:"https://github.com/cloudgeometry/langbuilder/blob/main/docker_example/docker-compose.yml",children:(0,s.jsx)(n.code,{children:"docker-compose.yml"})})," file builds a Langbuilder IDE image."]}),"\n",(0,s.jsxs)(n.p,{children:["For information about IDE deployments on Kubernetes, see ",(0,s.jsx)(n.a,{href:"/deployment-kubernetes-dev",children:"Deploy the Langbuilder development environment on Kubernetes"}),"."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Langbuilder runtime (production)"}),": Deploy the Langbuilder runtime for production flows, which is headless (backend only) service focused on serving the Langbuilder API. This is used for production environments where flows are executed programmatically without the need for the visual editor. The server exposes your flows as endpoints, and then runs only the processes necessary to serve each flow."]}),"\n",(0,s.jsx)(n.p,{children:"An external PostgreSQL database is strongly recommended with this deployment type to improve scalability and reliability as compared to the default SQLite database."}),"\n",(0,s.jsxs)(n.p,{children:["For information about runtime deployments on Kubernetes, see ",(0,s.jsx)(n.a,{href:"/deployment-kubernetes-prod",children:"Deploy the Langbuilder production environment on Kubernetes"}),"."]}),"\n",(0,s.jsx)(n.admonition,{type:"tip",children:(0,s.jsxs)(n.p,{children:["You can start Langbuilder in headless mode with the ",(0,s.jsx)(n.code,{children:"LANGBUILDER_BACKEND_ONLY"})," ",(0,s.jsx)(n.a,{href:"/environment-variables",children:"environment variable"}),"."]})}),"\n"]}),"\n"]}),"\n",(0,s.jsxs)(n.p,{children:["You can also ",(0,s.jsx)(n.a,{href:"/deployment-docker",children:"deploy the Langbuilder IDE and runtime on Docker"}),"."]}),"\n",(0,s.jsx)(n.h2,{id:"benefits-of-deploying-langbuilder-on-kubernetes",children:"Benefits of deploying Langbuilder on Kubernetes"}),"\n",(0,s.jsx)(n.p,{children:"Deploying on Kubernetes offers the following advantages:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Scalability"}),": Kubernetes allows you to scale the Langbuilder service to meet the demands of your workload."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Availability and resilience"}),": Kubernetes provides built-in resilience features, such as automatic failover and self-healing, to ensure that the Langbuilder service is always available."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Security"}),": Kubernetes provides security features, such as role-based access control and network isolation, to protect the Langbuilder service and its data."]}),"\n"]}),"\n",(0,s.jsxs)(n.li,{children:["\n",(0,s.jsxs)(n.p,{children:[(0,s.jsx)(n.strong,{children:"Portability"}),": Kubernetes is a portable platform, which means that you can deploy the Langbuilder service to any Kubernetes cluster, on-premises or in the cloud."]}),"\n",(0,s.jsxs)(n.p,{children:["Langbuilder can be deployed on cloud platforms like AWS EKS, Google GKE, or Azure AKS. For more information, see the ",(0,s.jsx)(n.a,{href:"https://github.com/cloudgeometry/langbuilder-helm-charts",children:"Langbuilder Helm charts repository"}),"."]}),"\n"]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"langbuilder-deployment",children:"Langbuilder deployment"}),"\n",(0,s.jsx)(n.p,{children:"A typical Langbuilder deployment includes:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Langbuilder services"}),": The Langbuilder API and, for IDE deployments, the visual editor."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Kubernetes cluster"}),": The Kubernetes cluster provides a platform for deploying and managing Langbuilder and its supporting services."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Persistent storage"}),": Persistent storage is used to store the Langbuilder service's data, such as models and training data."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Ingress controller"}),": The ingress controller provides a single entry point for traffic to the Langbuilder service."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Load balancer"}),": Balances traffic across multiple Langbuilder replicas."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Vector database"}),": If you are using Langbuilder for RAG, you can integrate with the vector database in Astra Serverless."]}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Langbuilder reference architecture on Kubernetes",src:r(6452).A+"",width:"671",height:"361"})}),"\n",(0,s.jsx)(n.h2,{id:"environment-isolation",children:"Environment isolation"}),"\n",(0,s.jsx)(n.p,{children:"It is recommended to deploy and run separate development and production environments for Langbuilder:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:"Deploy the IDE in your development environment where your developers prototype and test new flows."}),"\n",(0,s.jsx)(n.li,{children:"Deploy the runtime in your production environment to serve flows as standalone services."}),"\n"]}),"\n",(0,s.jsx)(n.p,{children:(0,s.jsx)(n.img,{alt:"Langbuilder environments",src:r(86776).A+"",width:"601",height:"491"})}),"\n",(0,s.jsx)(n.p,{children:"This separation is designed to enhance security, support an organized software development pipeline, and optimize infrastructure resource allocation:"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Isolation"}),": By separating the development and production environments, you can better isolate different phases of the application lifecycle. This isolation minimizes the risk of development-related issues impacting the production environments."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Access control"}),": Different security policies and access controls can be applied to each environment. Developers may require broader access in the IDE for testing and debugging, while the runtime environment can be locked down with stricter security measures."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Reduced attack surface"}),": The runtime environment is configured to include only essential components, reducing the attack surface and potential vulnerabilities."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Optimized resource usage and cost efficiency"}),": By separating the two environments, you can allocate resources more effectively. Each flow can be deployed independently, providing fine-grained resource control."]}),"\n",(0,s.jsxs)(n.li,{children:[(0,s.jsx)(n.strong,{children:"Scalability"}),": The runtime environment can be scaled independently based on application load and performance requirements, without affecting the development environment."]}),"\n"]}),"\n",(0,s.jsx)(n.h2,{id:"next-steps",children:"Next steps"}),"\n",(0,s.jsxs)(n.ul,{children:["\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/deployment-prod-best-practices",children:"Best practices for Langbuilder on Kubernetes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/deployment-kubernetes-dev",children:"Deploy the Langbuilder development environment on Kubernetes"})}),"\n",(0,s.jsx)(n.li,{children:(0,s.jsx)(n.a,{href:"/deployment-kubernetes-prod",children:"Deploy the Langbuilder production environment on Kubernetes"})}),"\n"]})]})}function u(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,s.jsx)(n,{...e,children:(0,s.jsx)(c,{...e})}):c(e)}},6452:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/langbuilder-reference-architecture-49ff76b7f84ce43f5626edd5cb3fa7fa.png"},11470:(e,n,r)=>{r.d(n,{A:()=>w});var t=r(96540),s=r(18215),i=r(23104),o=r(56347),l=r(205),a=r(57485),d=r(31682),c=r(70679);function u(e){return t.Children.toArray(e).filter(e=>"\n"!==e).map(e=>{if(!e||(0,t.isValidElement)(e)&&function(e){const{props:n}=e;return!!n&&"object"==typeof n&&"value"in n}(e))return e;throw new Error(`Docusaurus error: Bad <Tabs> child <${"string"==typeof e.type?e.type:e.type.name}>: all children of the <Tabs> component should be <TabItem>, and every <TabItem> should have a unique "value" prop.`)})?.filter(Boolean)??[]}function h(e){const{values:n,children:r}=e;return(0,t.useMemo)(()=>{const e=n??function(e){return u(e).map(({props:{value:e,label:n,attributes:r,default:t}})=>({value:e,label:n,attributes:r,default:t}))}(r);return function(e){const n=(0,d.XI)(e,(e,n)=>e.value===n.value);if(n.length>0)throw new Error(`Docusaurus error: Duplicate values "${n.map(e=>e.value).join(", ")}" found in <Tabs>. Every value needs to be unique.`)}(e),e},[n,r])}function p({value:e,tabValues:n}){return n.some(n=>n.value===e)}function m({queryString:e=!1,groupId:n}){const r=(0,o.W6)(),s=function({queryString:e=!1,groupId:n}){if("string"==typeof e)return e;if(!1===e)return null;if(!0===e&&!n)throw new Error('Docusaurus error: The <Tabs> component groupId prop is required if queryString=true, because this value is used as the search param name. You can also provide an explicit value such as queryString="my-search-param".');return n??null}({queryString:e,groupId:n});return[(0,a.aZ)(s),(0,t.useCallback)(e=>{if(!s)return;const n=new URLSearchParams(r.location.search);n.set(s,e),r.replace({...r.location,search:n.toString()})},[s,r])]}function b(e){const{defaultValue:n,queryString:r=!1,groupId:s}=e,i=h(e),[o,a]=(0,t.useState)(()=>function({defaultValue:e,tabValues:n}){if(0===n.length)throw new Error("Docusaurus error: the <Tabs> component requires at least one <TabItem> children component");if(e){if(!p({value:e,tabValues:n}))throw new Error(`Docusaurus error: The <Tabs> has a defaultValue "${e}" but none of its children has the corresponding value. Available values are: ${n.map(e=>e.value).join(", ")}. If you intend to show no default tab, use defaultValue={null} instead.`);return e}const r=n.find(e=>e.default)??n[0];if(!r)throw new Error("Unexpected error: 0 tabValues");return r.value}({defaultValue:n,tabValues:i})),[d,u]=m({queryString:r,groupId:s}),[b,f]=function({groupId:e}){const n=function(e){return e?`docusaurus.tab.${e}`:null}(e),[r,s]=(0,c.Dv)(n);return[r,(0,t.useCallback)(e=>{n&&s.set(e)},[n,s])]}({groupId:s}),g=(()=>{const e=d??b;return p({value:e,tabValues:i})?e:null})();(0,l.A)(()=>{g&&a(g)},[g]);return{selectedValue:o,selectValue:(0,t.useCallback)(e=>{if(!p({value:e,tabValues:i}))throw new Error(`Can't select invalid tab value=${e}`);a(e),u(e),f(e)},[u,f,i]),tabValues:i}}var f=r(92303);const g={tabList:"tabList__CuJ",tabItem:"tabItem_LNqP"};var v=r(74848);function y({className:e,block:n,selectedValue:r,selectValue:t,tabValues:o}){const l=[],{blockElementScrollPositionUntilNextRender:a}=(0,i.a_)(),d=e=>{const n=e.currentTarget,s=l.indexOf(n),i=o[s].value;i!==r&&(a(n),t(i))},c=e=>{let n=null;switch(e.key){case"Enter":d(e);break;case"ArrowRight":{const r=l.indexOf(e.currentTarget)+1;n=l[r]??l[0];break}case"ArrowLeft":{const r=l.indexOf(e.currentTarget)-1;n=l[r]??l[l.length-1];break}}n?.focus()};return(0,v.jsx)("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.A)("tabs",{"tabs--block":n},e),children:o.map(({value:e,label:n,attributes:t})=>(0,v.jsx)("li",{role:"tab",tabIndex:r===e?0:-1,"aria-selected":r===e,ref:e=>{l.push(e)},onKeyDown:c,onClick:d,...t,className:(0,s.A)("tabs__item",g.tabItem,t?.className,{"tabs__item--active":r===e}),children:n??e},e))})}function x({lazy:e,children:n,selectedValue:r}){const i=(Array.isArray(n)?n:[n]).filter(Boolean);if(e){const e=i.find(e=>e.props.value===r);return e?(0,t.cloneElement)(e,{className:(0,s.A)("margin-top--md",e.props.className)}):null}return(0,v.jsx)("div",{className:"margin-top--md",children:i.map((e,n)=>(0,t.cloneElement)(e,{key:n,hidden:e.props.value!==r}))})}function j(e){const n=b(e);return(0,v.jsxs)("div",{className:(0,s.A)("tabs-container",g.tabList),children:[(0,v.jsx)(y,{...n,...e}),(0,v.jsx)(x,{...n,...e})]})}function w(e){const n=(0,f.A)();return(0,v.jsx)(j,{...e,children:u(e.children)},String(n))}},19365:(e,n,r)=>{r.d(n,{A:()=>o});r(96540);var t=r(18215);const s={tabItem:"tabItem_Ymn6"};var i=r(74848);function o({children:e,hidden:n,className:r}){return(0,i.jsx)("div",{role:"tabpanel",className:(0,t.A)(s.tabItem,r),hidden:n,children:e})}},28453:(e,n,r)=>{r.d(n,{R:()=>o,x:()=>l});var t=r(96540);const s={},i=t.createContext(s);function o(e){const n=t.useContext(i);return t.useMemo(function(){return"function"==typeof e?e(n):{...n,...e}},[n,e])}function l(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(s):e.components||s:o(e.components),t.createElement(i.Provider,{value:n},e.children)}},86776:(e,n,r)=>{r.d(n,{A:()=>t});const t=r.p+"assets/images/langbuilder-env-f22dcd672ba806af9fec3968171a4700.png"}}]);